<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<title>试题讲解</title>
		<link rel="stylesheet" type="text/css" href="../../../../css/aui/aui.css" />
		<link id="j_theme_base" rel="stylesheet" type="text/css" href="" />
		<style>
		</style>
	</head>
	<body>
		<div id="wrap">
			<header class="aui-bar aui-bar-nav aui-bar-primary" id="aui-header">
				<div id="cloud" class="topbar activebar">
					<div id="back" class="back" onclick="back();" tapmode="">
						<i class="aui-iconfont aui-icon-left"></i>返回
					</div>
					<div class="mTitle" id="mTitle">
						
					</div>
					<!--<div class="win-menu">
					<a id='menu' class="aui-iconfont aui-icon-add" ></a>
					</div>-->
				</div>
			</header>
		</div>
	</body>
	<script type="text/javascript" src="../../../../script/api.js"></script>
	<script type="text/javascript" src="../../../../script/base_config.js"></script>
	<script type="text/javascript" src="../../../../script/common/common.js"></script>
	<script type="text/javascript" src="../../../../script/assembly/openResource.js"></script>
	<script type="text/javascript" src="../../../../script/plug-in/base64.js" ></script>
	<script type="text/javascript" src="../../../../script/assembly/executeApp.js" ></script>
	<script type="text/javascript">
        //顶部header高度
        var header_h;
        var w_h;
        var page_type = "win";
        apiready = function() {
            //定位header位置，留出上面电池等空隙，苹果需要
            commonSetTheme({"level":4,"type":0});
            var header = $api.byId('aui-header');
            $api.fixStatusBar(header);
            header_h = api.pageParam.header_h;
            w_h = api.winHeight - header_h;
            backForAndroid();
            openBgFrame(api.pageParam);
            $api.setStorage('isOuterOpen',false);
        };
        
		function openBgFrame() {
		    var url = $api.getStorage('webPageUrl') + "&person_id=" + $api.getStorage('person_id') + '&identity_id='
		     + $api.getStorage('identity') + "&token=" + $api.getStorage('token_ypt');
		     
		     if (url.substring(0,9) == "undefined"){
		     	url = $api.getStorage('BASE_URL_ACTION') + url.substring(9);
		     }
		     console.log(url)
		    commonOpenFrame('webAppPage_frame',url,header_h + 20,false,false,"rgba(0,0,0,0)",{header_h: header_h});
		    showSelfProgress();
		}

        /**
         * 返回应用页面
         * 周枫
         * 2015.10.11
         */
        function back() {
        	switch(page_type){
        		case "win": 
        			api.closeWin();
        			break;
        		case "wkShowPage": 
                    api.execScript({
                    	name:api.winName,
						frameName:"webAppPage_frame",
                        script: 'closeWKShowPage()'
                    });
                    page_type = "win";
                    break;
                case "scShowPage":
                	api.execScript({
                    	name:api.winName,
						frameName:"webAppPage_frame",
                        script: 'closeSCShowPage()'
                    });
                    page_type = "win";
                    break;
        	}
        }

		function setBackType(type){
			page_type = type;
		}

        /**
         * 安卓点击返回的时候
         * 周枫
         * 2015.10.14
         */
        function backForAndroid() {
            api.addEventListener({
                name : "keyback"
            }, function(ret, err) {
                back();
            });
        }
    </script>
</html>