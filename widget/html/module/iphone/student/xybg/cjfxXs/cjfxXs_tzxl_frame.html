<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
        <title>同质训练</title>
        <link rel="stylesheet" type="text/css" href="../../../../../../css/aui/aui.css" />
        <link rel="stylesheet" type="text/css" href="../../../../../../css/module/common/list_frame.css" />
        <link rel="stylesheet" type="text/css" href="../../../../../../css/module/common/jyeoo/ques_data.css" />
        <link id="j_theme_base" rel="stylesheet" type="text/css" href="" />
        <style>
            body {
                margin: 0;
                background: rgba(0,0,0,0);
                color:#98979D;
            }
            .clearfix:after {
                content: ' ';
                display: block;
                clear: both;
                visibility: hidden;
                line-height: 0;
                height: 0;
            }
            .zuoye-name {
                border-bottom: 2px solid #e0e0e0;
                line-height: 55px;
                width: 100%;
            }
            .answer-title {
                border-top: 1px solid #f1f1f1;
                height: 55px;
                width: 100%;
                margin-bottom: 20px;
            }
            .title {
                width: 50%;
                float: left;
            }
            .answer-title div {
                height: 35px;
                display: inline-block;
                background: #4ED5F3;
                line-height: 35px;
                margin-top: 13px;
                padding: 0 15px;
                color: #ffffff;
            }
            .seleted {
                width: 20%;
                float: right;
                text-align: right;
            }
            .seleted .num {
                font-size: 22px;
                color: #4ED5F3;
            }
            .stem {
                padding: 20px 5%;
                max-width:100%;
                word-break:break-all;
            }
            .stem img {
                max-width: 90%;
                height:auto;
            }
            .stem div,.stem p,.stem span{word-wrap: break-word;word-break: normal; }
            .option dl {
                position:relative;
                border-radius: 5px;
                min-height: 55px;
                border: 2px solid #EFF1F1;
                margin-bottom: 20px;
            }
            .option dl dt {
                position:absolute;
                top:0px;
                bottom:-1px;
                display:block;
                font-size: 22px;
                font-weight: 600;
                width: 12%;
                height:100%;
                float: left;
                background: #EFF1F1;
        /*      line-height: 53px;*/
                border-radius: 1px 0 0 1px;
                text-align: center;
                color: #666;
            }
            .option dl dt div{
                position:absolute;
                top:50%;
                left:50%;
                margin-top:-10px;
                margin-left:-8px;
                height:20px
            }
            .option dl dd {
                width: 75%;
                float: right;
                margin-right:30px;
                min-height: 55px;
                line-height: 25px;
                padding:15px 0;
                color:#98979D;
                word-wrap: break-word;
                word-break: normal; 
            }
            .option dl dd div p img{
                vertical-align: middle;
                margin:10px 0;
            }
            .option dl dd img {
                max-width: 85%;
            }
            .option dl dd .judge{position:absolute;right:4%;top:50%;margin-top:-9px;width:18px;height:15px;display:inline-block;border:none !important;}
            .option dl dd .right{background:url(../../../../../../image/fun-module/iphone/zuoye/right.png) left top no-repeat;background-size:18px;}
            .option dl dd .wrong{background:url(../../../../../../image/fun-module/iphone/zuoye/wrong.png) left top no-repeat;background-size:18px;}
            .option .active {
                border: 2px solid #4ED5F3 !important;
            }
            .option .active dt {
                background: #4ED5F3 !important;
                color: #ffffff !important;
            }
            .option .wrong{border:2px solid #ff0000 !important;}
            .option .wrong dt{background:#ff0000  !important;color:#ffffff !important;}
            .upload-answer button {
                width: 100%;
                height: 55px;
                background: #4ED5F3;
                color: #ffffff;
                border-radius: 5px;
                font-size: 16px;
                margin-bottom: 20px;
            }
            .upload-answer button.no-use {
                background: #f1f1f1;
                color: #dCdCdc
            }
            .upload-answer button .aui-iconfont {
                margin-right: 5px;
                font-size: 22px;
            }
            .source-img ul {
                overflow: visible;
            }
            .source-img ul li {
                list-style: none;
                overflow: visible;
            }
            .source-img ul li div {
                text-align: center;
                border: 1px solid #f1f1f1;
                position: relative;
            }
            .next {
                line-height: 55px;
                text-align: right;
                border-top: 2px solid #4ED5F3;
                color: #4ED5F3
            }
            .source-img ul li.voice {
                position: relative;
                margin-bottom: 20px;
                background: url(../../../../../../image/fun-module/iphone/zuoye/voice.png) left top no-repeat;
                height: 50px;
                text-align: left;
                line-height: 45px;
                padding-left: 20px;
                color: #ffffff;
            }
            .source-img ul li.voice .delete-voice {
                position: absolute;
                right: -13px;
                top: -7px
            }
            .source-img ul li.voice .voice-right {
                position: absolute;
                right: -6px;
                top: 0;
                display:block;
                background: url(../../../../../../image/fun-module/iphone/zuoye/voice-right.png) right top no-repeat;
            }
            .img img{max-width: 100%;margin : 0 5% 15px 5%;max-width:90%;height:auto;}
            .plr15 {
                padding: 0 15px;
            }
            .no-data {
                text-align: center;
                color: #c0c0c0;
                background: url(../../../../../../image/fun-module/iphone/zuoye/kong.png) center top no-repeat;
                padding-top: 55px;
                margin-bottom: 20px;
            }
            .footer-div{
                position:fixed;
                height:55px;
                background:#ffffff;
                display: block;
                bottom: 0px;
                width:100%;
                box-shadow:3px 0 4px #aaaaaa;
                z-index: 9999;
            }
            .footer-div .prevQ,.footer-div .nextQ{display: inline-block;width:50%;float: left;}
            .footer-div .prevQ{text-align: left;}
            .footer-div .nextQ{text-align: right;}
            .footer_div{height:70px;}
            .no-question-data{text-align:center;color:#666;height:50px;line-height:50px;}
            .plrb15{padding:0 15px 15px 15px;}
            .source-img{color:#9C9C9C;}
            .right-answer span{z-index: 0 !important;}
            .analysis-btn{width:92%;line-height:36px;text-align:center;color:#ffffff;background:#4ED5F3;margin-top:9px;border-radius:2px;margin-left:4%;margin-bottom:15px;}
        </style>
    </head>
    <body id="body" class="common-iphone-cjfxXs">
        <div id="q_title"></div>
        <div class="q_div" id="q_div">
        </div>
        <script type="text/html" id="q_script">
            <div class="zuoye-name plr15 clearfix">
                <div class="title"><%=qt_name %></div>
                <div class="seleted"><font class="num"><%=sort%></font>/<%=list_length%></div>
            </div>
            <%if(question_title){%>
                <%if(qt_id == 72){ %>
                    <div class="stem clearfix">
                        <%=#question_title%>
                    </div>
                    <div id="j_option" class="option plr15 clearfix">
                        <dl class="clearfix" answerOption="正确">
                            <dt><div>1</div></dt>
                            <dd>正确
                                <div id="j_right_1" class="judge right" style="display:none;"></div>
                                <div id="j_wrong_1" class="judge wrong" style="display:none;"></div>
                            </dd>
                        </dl>
                        <dl class="clearfix" answerOption="错误">
                            <dt><div>2</div></dt>
                            <dd>错误
                                <div id="j_right_2" class="judge right" style="display:none;"></div>
                                <div id="j_wrong_2" class="judge wrong" style="display:none;"></div>
                            </dd>
                        </dl>
                    </div>
                    <%if(jx_info == 0){%>
                        <div id="j_jx_btn" class="analysis-btn" onclick="viewAnalysis('<%=question_analysis_base64%>',<%=sort%>)">查看答案及解析</div>
                    <%}%>   
                    <div id="j_all" class="<%if(jx_info == 0){%>display-none<%}%>   ">
                        <div id="j_right_answer_title" class="answer-title clearfix">
                            <div>
                                正确答案
                            </div>
                        </div>
                        <div id="j_right_answer" class="source-img plrb15 right-answer img clearfix">
                            <%=#question_answer%>
                        </div>
                            <div id="j_analysis_title" class="answer-title clearfix">
                            <div>
                                试题解析
                            </div>
                            </div>
                            <div id="j_analysis" class="source-img plrb15 img clearfix">
                                <%=#question_analysis%>
                            </div>
                    </div>
                <!--//判断题-->
                <%}else if(qt_id == 2){ %>
                    <!--客观题-->
                    <div class="stem clearfix">
                        <%=#question_title%>
                    </div>
                    <div id="j_option" class="option plr15 clearfix">
                        <%for(var i = 0; i < question_answer_length; i++){%>
                            <dl class="clearfix" answerOption="<%=question_answer_first[i]%>">
                                <dt><div><%=question_answer_first[i]%></div></dt>
                                <dd>
                                    <%=#quetionOption[i]%>
                                    <div id="j_right_<%=question_answer_first[i]%>" class="judge right" style="display:none;"></div>
                                    <div id="j_wrong_<%=question_answer_first[i]%>" class="judge wrong" style="display:none;"></div>
                                </dd>
                            </dl>
                        <%}%>
                    </div>
                    <%if(jx_info == 0){%>
                        <div id="j_jx_btn" class="analysis-btn" onclick="viewAnalysis('<%=question_analysis_base64%>',<%=sort%>)">查看答案及解析</div>
                    <%}%>   
                    <div id="j_all" class="<%if(jx_info == 0){%>display-none<%}%>   ">
                        <div id="j_right_answer_title" class="answer-title clearfix">
                            <div>
                                正确答案
                            </div>
                        </div>
                        <div id="j_right_answer" class="source-img plrb15 right-answer img clearfix">
                            <%=#question_answer%>
                        </div>
                            <div id="j_analysis_title" class="answer-title clearfix">
                            <div>
                                试题解析
                            </div>
                            </div>
                            <div id="j_analysis" class="source-img plrb15 img clearfix">
                                <%=#question_analysis%>
                            </div>
                    </div>
                <% } else if (qt_id == 26 || qt_id == 8) { %>
                    <!--客观题-->
                    <div class="stem clearfix">
                        <%=#question_title%>
                    </div>
                    <div id="j_option" class="option plr15 clearfix">
                        <%for(var i = 0; i < question_answer_length; i++){%>
                            <dl class="clearfix" answerOption="<%=question_answer_first[i]%>">
                                <dt><div><%=question_answer_first[i]%></div></dt>
                                <dd>
                                    <%=#quetionOption[i]%>
                                    <div id="j_right_<%=question_answer_first[i]%>" class="judge right" style="display:none;"></div>
                                    <div id="j_wrong_<%=question_answer_first[i]%>" class="judge wrong" style="display:none;"></div>
                                </dd>
                            </dl>
                        <%}%>
                    </div>                                      
                    <%if(jx_info == 0){%>
                        <div id="j_jx_btn" class="analysis-btn" onclick="viewAnalysis('<%=question_analysis_base64%>',<%=sort%>)">查看答案及解析</div>
                    <%}%>   
                    <div id="j_all" class="<%if(jx_info == 0){%>display-none<%}%>   ">
                        <div id="j_right_answer_title" class="answer-title clearfix">
                            <div>
                                正确答案
                            </div>
                        </div>
                        <div id="j_right_answer" class="source-img plrb15 right-answer img clearfix">
                            <%=#question_answer%>
                        </div>
                            <div id="j_analysis_title" class="answer-title clearfix">
                            <div>
                                试题解析
                            </div>
                            </div>
                            <div id="j_analysis" class="source-img plrb15 img clearfix">
                                <%=#question_analysis%>
                            </div>
                    </div>
                <%}else{%>
                <!--主观题-->
                    <div class="stem clearfix">
                        <%=#question_title%>
                    </div>
                    <%if(jx_info == 0){%>
                        <div id="j_jx_btn" class="analysis-btn" onclick="viewAnalysis('<%=question_analysis_base64%>',<%=sort%>)">查看答案及解析</div>
                    <%}%>   
                    <div id="j_all" class="<%if(jx_info == 0){%>display-none<%}%>   ">
                        <div id="j_right_answer_title" class="answer-title clearfix">
                            <div>
                                正确答案
                            </div>
                        </div>
                        <div id="j_right_answer" class="source-img plrb15 right-answer img clearfix">
                            <%=#question_answer%>
                        </div>
                        <div id="j_analysis_title" class="answer-title clearfix">
                            <div>
                                试题解析
                            </div>
                        </div>
                        <div id="j_analysis" class="source-img plrb15 img clearfix">
                            <%=#question_analysis%>
                        </div>
                        
                    </div>
                <% } %>
            <%}else{%>
                <div class="no-question-data">该试题信息正在生成，请稍候查看</div>
            <%}%>                   <!--下一题-->
            </script>
            <div class="footer-div next clearfix">
                <div class="prevQ" onclick="enterPreQuestion();"><span class="aui-iconfont aui-icon-left"></span>上一题</div>
                <div class="nextQ" onclick="goNextQuestion();">下一题<span class="aui-iconfont aui-icon-right"></span></div>
            </div>
            
            <div id='stjj_div'>
                <div id="wkinfo_div"></div>
                <script type="text/html" id="wkinfo_script">
                    <div id="j_analysis_stjj_title" class="answer-title clearfix">
                        <div>
                            试题讲解
                        </div>
                    </div>
                    <div id="j_analysis_stjj_list" class="source-img plrb15 img clearfix">
                            <!--微课列表-->
                            <div class="section3">
                                <div class="item style1" tapmode="itemhover">
                                    <div class="itemlogo userlogo" style="width: 100px;height: 80px;">
                                        <img style="border: 1px solid #e7e7e7;border-radius: 2px;"  onerror="this.src='../../../../../../image/yingyong/weike/wk_default.png'" src="<%=sp_list[0].wk_thumb_url %>"   >
                                    </div>
                                    <div class="itemshelf" onclick="openWk('<%=sp_list[0].extension %>', '<%=sp_list[0].fileid %>', '<%=sp_list[0].title %>', '<%=sp_list[0].m3u8_status %>',<%=wk_id %>);">
                                        <div class="shelfinfo01">
                                            <%=wkds_name %>
                                        </div>
                                        <div class="shelfinfo04">
                                            教师：<%=teacher_name %><br />
                                            发布 ：<%=oper_time.substring(0,10) %><br />
                                            浏览次数：<%=play_count %>&nbsp;次
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                    </div>
                </script>
            </div>
        <div id="footer_div" class="footer_div">
            &nbsp;
        </div>
    </body>
    <script type="text/javascript" src="../../../../../../script/api.js"></script>
    <script type="text/javascript" src="../../../../../../script/base_config.js" ></script>
    <script type="text/javascript" src="../../../../../../script/plug-in/template.js" ></script>
    <script type="text/javascript" src="../../../../../../script/plug-in/base64.js" ></script>
    <script type="text/javascript" src="../../../../../../script/common/common.js" ></script>
    <script type="text/javascript" src="../../../../../../script/module/common/cjfxXs.js"></script>
    <script type="text/javascript" src="../../../../../../script/assembly/openResource.js" ></script>
    <script type="text/javascript">
        var header_h;
        var qt_id;//试题的类型
        var q_cur_num = 0;//当前试题
        var q_sum = 0;//试题总数
        var q_json_str;//试题json
        var type;//判断是否要查看学生的答题情况
        var analysis_array=[];//每个试题对应的试题解析
        var transmit_param;
        apiready = function() {
            commonSetTheme({"level":6,"type":0});
            header_h = api.pageParam.header_h;
            transmit_param = JSON.parse(api.pageParam.transmit_param);
            q_json_str = {"zy_info" : {"list":[]}};
            $api.css($api.byId('stjj_div'),'display:none');
            getSameQuestioninfo_noVad(function(data){
                qryDtqQues(0,data);
            });
            //getZyInfoById()
            //下一题
            commonScreenSwipeLeft('goNextQuestion();');
            //上一题
            commonScreenSwipeRight('enterPreQuestion();');
        };
        /*
        *author:zhaoj
        *function:获取试题数据
        *date：20170725
        */
        function qryDtqQues(index,data){
            if(index < data.data.length && index < 5){
                api.ajax({
                    url :BASE_URL_ACTION + '/question/qryDtqQues?question_id_char='+data.data[index].questionIdChar+'&random_num='+creatRandomNum(),
                    method : 'get',
                    timeout : 30,
                    dataType : 'json',
                    headers : {
            'Cookie' : 'person_id=' + $api.getStorage("person_id") + '; identity_id=' + $api.getStorage("identity") + '; token=' + $api.getStorage("token_ypt") + ';'
                }
                }, function(ret, err) {
                    if (err) {
                    } else {
                        if(ret.success){
                            var list = ret.list;
                            var oparam = new Object();
                            if(data.data.length >　5){
                                oparam.list_length =5;
                            }else{
                                oparam.list_length = data.data.length;
                            }
                            oparam.sort = index+1;
                            oparam.qt_id = list[0].question_type_id;
                            oparam.wk_id = data.data[index].wk_id;
                            oparam.qt_name = list[0].question_type_name;
                            oparam.zsd = list[0].zsd;
//                          oparam.qt_type = transmit_param.qt_type;
                            oparam.jx_info = 0;
                            if(list[0].question_title){
                                oparam.ques_html={};
                                var question_title = Base64.decode(list[0].question_title);
                                var key = '/dsideal_yy';
                                var key_re = BASE_URL_ACTION;
                                oparam.question_title = question_title.replaceAll(key, key_re);
                                var question_analysis=Base64.decode(list[0].question_analysis);
                                oparam.question_analysis = question_analysis.replaceAll(key, key_re);
                                oparam.question_analysis_base64 = Base64.encode(oparam.question_analysis);
                                oparam.question_answer= Base64.decode(list[0].question_answer).replaceAll(key, key_re);
                                if(list[0].quetionOption != ''){
                                    var count_length = getJsonObjLength(list[0].quetionOption);
                                    oparam.question_answer_length = count_length;
                                    oparam.quetionOption=JSON.parse(commonQuetionOption(count_length,JSON.stringify(list[0].quetionOption),key,key_re));
                                    oparam.question_answer_first = JSON.parse(commonQuetionOptionFirst(count_length))
                                }else{
                                    oparam.question_answer_length = 0;
                                }
                            }
                            q_json_str.zy_info.list.push(oparam);
                        }else{
                        }
                    }
                    index++;
                    qryDtqQues(index,data);
                });
            }else{
                api.hideProgress();
                reWriteQuestion(q_cur_num);
            }
        }
        /*
        *author:zhaoj
        *function:将试题显示到页面中
        *date：201604014
        */
        function reWriteQuestion(q_cur) {
            var length = q_json_str.zy_info.list.length;
            if(length>0){
                var cur_list = q_json_str.zy_info.list[q_cur];
                q_sum = q_json_str.zy_info.list.length - 1;
                qt_id = cur_list.qt_id;
                var html_type = template.render('q_script', cur_list);
                document.getElementById('q_div').innerHTML = html_type;
                judgeLastOrFirst(q_cur+1,length);//判断是最后一题还是第一题
                judgeTextIndent();
                
                var wk_id = q_json_str.zy_info.list[q_cur].wk_id;
                getwkdsInfo(wk_id,function(is_true, wk_info){
                    if(is_true){
                        var html_type = template.render('wkinfo_script', wk_info);
                        document.getElementById('wkinfo_div').innerHTML = html_type;
                    } 
                });
            }else{
                $api.html($api.byId('q_div'), '<div class="no-question-data">暂无试题</div>');
            }
        }
        /*
        *author:zhaoj
        *function:判断每个p标签的text-indent属性，解决这个属性过大导致整体页面变宽的问题
        *date：201604014
        */
        function judgeTextIndent(){
            var pArray = $api.domAll($api.byId('body'), 'p');
            var widthValue = Math.floor(api.winWidth/2);
            for(var i = 0; i < pArray.length; i++){     
                var textIndentValue = $api.cssVal(pArray[i],'text-indent');
                textIndentValue = textIndentValue.substring(0,textIndentValue.length-2)*1;
                if(textIndentValue > widthValue || textIndentValue < -widthValue){
                    $api.css(pArray[i],'text-indent:0em;');
                }
                var paddingLeftValue = $api.cssVal(pArray[i],'padding-left');
                paddingLeftValue = paddingLeftValue.substring(0,paddingLeftValue.length-2)*1;
                if(paddingLeftValue > widthValue || paddingLeftValue < -widthValue){
                    $api.css(pArray[i],'padding-left:0;');
                }

            }
        }
        /*
        *author:zhaoj
        *function:判断是第一题还是最后一题
        *date：201604019
        */
        function judgeLastOrFirst(q_cur,length){
            if(q_cur == 1 && length != 1){
                $api.css($api.dom('.prevQ'),'display:none;');
                $api.css($api.dom('.nextQ'),'float:right;');
            }else if(q_cur == length && length != 1){
                $api.css($api.dom('.prevQ'),'float:left;');
                $api.css($api.dom('.nextQ'),'display:none;');
            }else if(q_cur == 1 && length == 1){
                $api.css($api.dom('.footer-div'),'display:none;');
                $api.css($api.byId('footer_div'),'display:none;');
            }else{
                $api.css($api.dom('.prevQ'),'display:block;');
                $api.css($api.dom('.nextQ'),'display:block;');
            }
        }
        function goNextQuestion(){
            $api.css($api.byId('stjj_div'),'display:none');
            if (q_cur_num < q_sum) {
                q_cur_num++;
                reWriteQuestion(q_cur_num);
            } else {
                q_cur_num = q_cur_num;
                api.toast({
                    msg : '已经到最后一题'
                });
            }
        }
        /*
        *author:zhaoj
        *function:进入下一道试题
        *date：20160408
        */
        function enterPreQuestion(){
            $api.css($api.byId('stjj_div'),'display:none');
            if (q_cur_num > 0) {
                q_cur_num--;
            } else {
                api.toast({
                    msg : '已经到第一题'
                });
                q_cur_num = 0;
            }
            reWriteQuestion(q_cur_num);
        }
        /*
        *author:zhaoj
        *function:查看解析
        *date：20160414
        */
        function viewAnalysis(question_analysis_base64,sort){
            showSelfProgress('获取答案及解析中...');
            api.hideProgress();
            q_json_str.zy_info.list[sort-1].jx_info =0;
            $api.css($api.byId('j_jx_btn'),'display:none');
            $api.css($api.byId('j_all'),'display:block');
            $api.css($api.byId('stjj_div'),'display:block');
        }
        /*
        *author:zhaoj
        *function:获取同质题question_id_char
        *王卓岩
        *date：20170725
        */
        function getSameQuestioninfo_noVad(callback){
            showSelfProgress('加载中...');
            api.ajax({
                url :ip_url+'sys/questions/getSameQuestioninfo_noVad.jhtml?id='+transmit_param.id+'&jsoncallback=?',
                method : 'get',
                timeout : 30,
                dataType : 'json',
                returnAll : false,
                }, function(ret,err) {
                    var data = getJsonData(err);
                    if (data.rencode == 0) {
                        callback(data);
                    }else{
                        api.hideProgress();
                        popToast('获取试题信息失败，请稍候重试');
                    }
                });
        }
        
        /*
    *author:zhaoj
    *function:获取微课详情
    * 谷长江
    *date：20170725
    */
    function getwkdsInfo(wk_id,callback){
        if(wk_id == -1) {
            callback(false, '');
        } else {
            showSelfProgress('加载中...');
            api.ajax({
                url : BASE_URL_ACTION + '/wkds/getwkdsInfo?random_num='+creatRandomNum()+'&id='+wk_id,
                method : 'get',
                dataType : 'json',
                timeout : 30,
                cache : false,
                headers : {
                    'Cookie' : 'person_id=' + $api.getStorage("person_id") + '; identity_id=' + $api.getStorage("identity") + '; token=' + $api.getStorage("token_ypt") + ';'
                }
            }, function(ret, err) {
                api.hideProgress();
                if(err){
                    popToast('获取微课讲解信息失败，请稍候重试');
                } else {
                    if(ret) {       
                        var wk_list = ret.sp_list;
                        var wk_list_l = getJsonObjLength(wk_list);
                        if (wk_list_l > 0) {
                            for (var i = 0; i < wk_list_l; i++) {
                                var wk_thumb_id = wk_list[i].thumb_id;
                                var wk_thumb_url = '';
                                if (BASE_APP_TYPE == 1) {
                                    //https://dsideal.obs.cn-north-1.myhuaweicloud.com/down/Thumbs/8E/8E75B87E-68AC-4ACA-87EE-988207BE549C.thumb
                                    wk_thumb_url = url_path + BASE_THUMB_BEGIN + wk_thumb_id.substring(0, 2) + '\/' + wk_thumb_id + BASE_THUMB_END;
                                } else {
                                    wk_thumb_url = BASE_URL_ACTION + BASE_THUMB_BEGIN + wk_thumb_id.substring(0, 2) + '/' + wk_thumb_id + BASE_THUMB_END;
                                }
                                wk_list[i]["wk_thumb_url"] = wk_thumb_url;
                            }
                        }
                        ret["wk_id"] = wk_id;
                        callback(true, ret);
                    } else {
                        popToast('获取微课讲解信息失败，请稍候重试');
                    }
                }
            });
        }
        
    }
    
    function openWk(wk_extension, wk_file_id, wk_m3u8_title, wk_m3u8_status, wk_id){
        setPlayCount(wk_id);
        common_openResource.open(wk_extension, wk_file_id, wk_m3u8_title, wk_m3u8_status, api.winName, 'reBackType("voice")', 'back();', '');
    }
    
    /**
         * 已学习+1
         * 周枫
         * 2015.12.22
         */
        function setPlayCount(wk_id) {
            //http://www.edusoa.com/dsideal_yy/wkds/setPlayCount?id=10590&random_num=494824
            api.ajax({
                url : BASE_URL_ACTION + '/wkds/setPlayCount?id=' + wk_id + '&random_num=' + creatRandomNum(),
                method : 'get',
                dataType : 'json',
                timeout : 30,
                cache : false
            }, function(ret, err) {
               
            });
        }
        
        function isShowStjx(is_true){
//          $api.css($api.domAll('.analysis-btn'),'display:block');

        
//          if(is_true) {
//              $api.css($api.byId('j_jx_btn'),'display:block');
//              $api.css($api.byId('j_all'),'display:none');
//              $api.css($api.byId('stjj_div'),'display:none');
//          } else {
//              $api.css($api.byId('j_jx_btn'),'display:none');
//              $api.css($api.byId('j_all'),'display:block');
//              $api.css($api.byId('stjj_div'),'display:block');
//          }
        }
    </script>
</html>