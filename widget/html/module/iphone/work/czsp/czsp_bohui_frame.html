<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>驳回申请理由</title>
    <link rel="stylesheet" type="text/css" href="../../../../../css/aui/aui.css" />
    <link id="j_theme_base" rel="stylesheet" type="text/css" href="" />
    <style>
    	body{background:transparent;}
    	.shadow{position:absolute;left:0;top:0;width:100%;height:100%;z-index: 1;background:#000000;opacity:0;}	
		.main{position:absolute;z-index:2;width:86%;height:260px;left:50%;top:50%;margin-left:-43%;margin-top:-130px;z-index: 2;background:#ffffff;box-shadow: 0 2px 5px 3px #666666;}   
    	.title{ height:63px; border-bottom: 2px solid #1ABC9C; line-height:63px; color:#1ABC9C;padding-left:4%;font-weight:bold;font-size:20px;}	
    	.button{height:47px;border-top:1px solid #e6e6e6;}
    	.smt-btn,.cnl-btn{width:50%;height:47px;border:0;background:#ffffff;float: left;}
    	.smt-btn{border-right:1px solid #e6e6e6 !important;}
    	.content{position:relative;height:155px;}
    	.bdr-rdu{border-radius:2px;}
    	.bdr-rdu-top{border-radius:2px 2px 0 0;}
    	.bdr-rdu-bottom{border-radius:0 0 2px 2px;}
    	.bdr-rdu-bottom-left{border-radius:0 0 0 2px;}
    	.bdr-rdu-bottom-right{border-radius:0 0 2px 0;}
    	.btn-click{background : #50b350;}
    	.name{float:left;top:24px;padding-left:5%;padding-top:10px;min-width:80px;width:40%;}
    	.input-div{position:relative;display:inline-block;margin-right:5%;float:right;padding-top:12px;width:90%;}
    	.input-div textarea{border:1px solid #cccccc;border-radius:3px;line-height:20px;padding:9px 5px;width:100%;height:131px;overflow-y: visible;margin-bottom:0;}
    	.tip{position:absolute;right:0;bottom:-12px;height:20px;line-height:20px;font-size:12px;color:#bbbbbb;}
    </style>
</head>
<body>	
	<div id="j_shadow" class="shadow" tapmode></div>
	<div class="main bdr-rdu">
		<div id="title" class="title bdr-rdu-top">请输入驳回理由</div>
		<div class="content">
			<div class="input-div">
				<textarea id="fl_val" placeholder="驳回申请后，将不能再次审批（最多支持200个字符）" oninput='commonRemoveExpression(this);' maxlength="200"></textarea>
			</div>
		</div>
		<div class="button bdr-rdu-bottom">
			<button class="smt-btn bdr-rdu-bottom-left" tapmode="btn-click" onclick="closeFrame();">取消</button>
			<button class="cnl-btn bdr-rdu-bottom-right" tapmode="btn-click" onclick="save();">确定</button>
		<div>
	</div>
</body>
<script type="text/javascript" src="../../../../../script/api.js"></script>
<script type="text/javascript" src="../../../../../script/base_config.js" ></script>
<script type="text/javascript" src="../../../../../script/plug-in/base64.js" ></script>
<script type="text/javascript" src="../../../../../script/common/common.js" ></script>
<script type="text/javascript">
	var BASE_URL_ACTION;
	apiready = function(){
		commonSetTheme({"level":5,"type":0});
		BASE_URL_ACTION = $api.getStorage('BASE_URL_ACTION');	
	};
	
    /*
	*author:zhaoj
	*function:关闭当前frame
	*date：20160315
	*/
	function closeFrame(){
		api.closeFrame({
			name : 'czsp_bohui_frame'
		});
	}
	
	/*
	 *作者:zhaoj
	 *功能:验证输入框，不允许输入表情
	 *日期：20171106
	 */
	function commonRemoveExpression(self){
	    var param = $api.val(self);
	    var regRule = /\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]|\uD83D[\uDE80-\uDEff]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi;
	    if(param.match(regRule)) {
	        param = param.replace(regRule, "");
	        $api.val(self,param);
	    } 
	}
	
	function save(){
		var content = $api.val($api.byId('fl_val'));
		if(typeof (content) == "undefined" || content == null || content.length == 0) {
			popBottomToast('请输入驳回理由');
			return;
		}
		content = Base64.encode(content);
		api.execScript({
			name:'czsp_content_window',
			frameName:'czsp_content_frame',
	        script: 'spPassFun(2,"'+content+'");'
	    });
		
		
	}
</script>
</html>