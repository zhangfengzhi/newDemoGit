<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>考勤分类</title>
    <link rel="stylesheet" type="text/css" href="../../../../../css/aui/aui.css" />
    <link id="j_theme_base" rel="stylesheet" type="text/css" href="" />
    <style>
    	ul li{list-style:none;border-bottom:1px solid #E2E6E8;height:45px;line-height:45px;padding-left:15px;}
    	ul li.first{background:#EFEFEF;font-size:13px;color:#9E9E9E;line-height:57px;}
    	ul li .name{padding-left:25px;float:left; font-size:14px;color:#566973;background:url(../../../../../image/fun-module/common/tag.png) left center no-repeat;background-size: 19px 19px;}
    	ul li .caozuo{float: left;}
    	ul li .caozuo img{padding-left:7px;display:inline-block;width:22px;height:15px;margin-top:15px;}
    	.no-data{text-align:center;color:#666;margin-top:10px;}
    	.shadow{position:absolute;left:0;top:0;width:100%;height:100%;z-index: -1;background:#000000;opacity:0;}
    </style>
</head>
<body class="common-iphone-kaoqin">
	<div id="shadow" class="shadow"></div>
	<div>
		<ul id="style_body">
<!--			<li class="first">考勤分类</li>
			<li onclick='selectedKqlx(this)'>
				<div class="name">事假</div>
				<div class="caozuo">
					<img src="../../../../../image/fun-module/common/duihao.png" src="对号" />
				</div>
			</li>
			<li onclick='selectedKqlx(this)'>
				<div class="name">病假</div>
			</li>-->
		</ul>
		<script type="text/html" id="style_script">
			<%if(rule_type == 1){%>
				<li class="first">请假分类</li>
			<%}else{%>
				<li class="first">公出分类</li>
			<%}%>
			<%for(var i=0; i<list.length; i++) {%>
				<li onclick='selectedType(this)' flag=<%=list[i].right%> styleID=<%=list[i].id%>>
					<div class="name" style="background:url(../../../../../image/fun-module/iphone/kaoqin/<%=list[i].id%>.png) left center no-repeat;background-size: 20px 20px;"><%=list[i].name%></div>
					<div class="caozuo">
						<%if(list[i].right){%>
							<img src="../../../../../image/fun-module/common/duihao.png" src="对号" />
						<%}%>
					</div>
				</li>
			<% } %>
		</script>
	</div>
</body>
<script type="text/javascript" src="../../../../../script/api.js"></script>
<script type="text/javascript" src="../../../../../script/base_config.js" ></script>
<script type="text/javascript" src="../../../../../script/plug-in/template.js" ></script>
<script type="text/javascript" src="../../../../../script/common/common.js" ></script>
<script type="text/javascript" src="../../../../../script/common/kaoqin_common.js" ></script>
<script type="text/javascript">
	var header_h;
	var seq ;//多少条数据
	apiready = function(){
		commonSetTheme({"level":5,"type":0});
		header_h = api.pageParam.header_h;
		initTypeData(api.pageParam.rule_type);
	};
	
	/*
	*author:zhaoj
	*function:选择个人分类
	*date：20160317
	*/
	function selectedType(self){
		var liArrayNodes = self.parentNode.getElementsByTagName("li");
		if(self.getAttribute("flag") == 0){
			for(var i = 0; i<liArrayNodes.length; i++){
				if(liArrayNodes[i].getAttribute("flag")==1){
					var img = $api.dom(liArrayNodes[i],'img');
					$api.last(liArrayNodes[i]).removeChild(img);
					liArrayNodes[i].setAttribute("flag",0);
				}
			}
			$api.html($api.last(self),'<img src="../../../../../image/fun-module/common/duihao.png" src="对号" />');
			self.setAttribute("flag",1);
		}
		var name = $api.text($api.first(self,'div'));
		$api.css($api.byId('shadow'),"z-index:2;");
		commonExecScript('kaoqin_add_window','kaoqin_add_frame','modifyStyle("'+name+'",'+self.getAttribute("styleID")+');',1);
		setTimeout(function() {
			commonExecScript('kaoqin_add_window','','back();',0);
		}, 800);
	}
	/*
	*author:zhaoj
	*function:初始化请假类型和公出类型数据
	*date：20160623
	*/
	function initTypeData(rule_type){
		getRuleTypeList(1,rule_type,function(flag,data){
			if(flag){
				data.rule_type = rule_type;
				for(var i = 0; i <data.list.length; i++){
					if(api.pageParam.id == data.list[i].id){
						data.list[i].right = 1;
					}else{
						data.list[i].right = 0;
					}
				}
				addTemplateHtml('style_body', 'style_script', data,1);
			}
		})
	}
</script>
</html>