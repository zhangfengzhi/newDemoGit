<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<!-- html5：在创建html时为了防止页面缩放等不兼容效果，要创建个viewport  -->
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<!-- 在IOS设备上，有时会将数字转为手机号，这里也要禁止下 -->
		<meta name="format-detection" content="telephone=no"/>
		<title>考勤申请</title>
		<link rel="stylesheet" type="text/css" href="../../../../../css/aui/aui.css" />
		<link id="j_theme_base" rel="stylesheet" type="text/css" href="" />
		<style>
			.history-date {
				font-size: 12px;
			}
			#message-content {
				overflow-y: auto;
				display: none;
			}
			
			
			.t_display_n {
				display: none;
			}
			.t_display_b {
				display: block;
			}
			.tag-title{height:45px; line-height:43px;background:#ffffff ;border-bottom:2px solid #E6E6E6;}
			.tag-title div{width:50%;text-align:center;color:#62656A;}
			.fl{float:left;}
			.fr{float:right;}
		</style>
	</head>
	<body class="common-iphone-kaoqin">
		<div id="wrap">
			<header class="aui-bar aui-bar-nav aui-bar-primary" id="aui-header">
				<div id="cloud" class="topbar activebar">
					<div id="back" class="back" onclick="back();" tapmode="">
						<i class="aui-iconfont aui-icon-left"></i>返回
					</div>
					<div  class="mTitle" id="mTitle">
						申请
					</div>
					<div class="win-menu">
					</div>
				</div>
				<div class="tag-title">
					<div id="qingjia" class="fl" onclick="openQjFrame(0);">请假</div>
					<div id="gongchu" class="fr" onclick="openGcFrame(0);">公出</div>
				</div>
			</header>
			<div  class="aui-content aui-content-padded" id="message-content">
				<p class="aui-text-center history-date"></p>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../../../../../script/api.js"></script>
	<script type="text/javascript" src="../../../../../script/base_config.js" ></script>
	<script type="text/javascript" src="../../../../../script/common/common.js"></script>
	<script type="text/javascript">
		//顶部header高度
		var header_h;
		var rule_type = 0;//type=0请假，type=1公出
		back_type = 'index';//返回参数
		apiready = function() {
			commonSetTheme({"level":5,"type":0});
			//定位header位置，留出上面电池等空隙，苹果需要
			header_h = api.pageParam.header_h;
			//打开我的考勤请假申请页面
			if(api.pageParam.ruleType == 0){
				$api.removeCls($api.byId('gongchu'),'active');
				$api.addCls($api.byId('qingjia'),'active');
				rule_type = 0;
				openFrame('kaoqin_add_frame',api.pageParam.ruleType);
			}else{
				$api.removeCls($api.byId('qingjia'),'active');
				$api.addCls($api.byId('gongchu'),'active');
				rule_type = 1;
				openFrame('kaoqin_add_frame',api.pageParam.ruleType);
			}
			commonBackForAndroid();//安卓关闭
			commonIosAuiHeader();//定位header位置，留出上面电池等空隙，苹果需要
		};
		/*
		*author:zhaoj
		*function:打开我的考勤请假申请页面
		*date：20160620
		*/
		function openQjFrame(type){
			if(type){
				reBackType('index');
				$api.removeCls($api.byId('gongchu'),'active');
				$api.addCls($api.byId('qingjia'),'active');
				rule_type = 0;
				commonExecScript('kaoqin_add_window','kaoqin_add_frame','changeType(0);',1);
			}else{
				commonExecScript('kaoqin_add_window','kaoqin_add_frame','verExitContent();',1);
			}
		}
		/*
		*author:zhaoj
		*function:打开我的考勤公出申请页面
		*date：20160620
		*/
		function openGcFrame(type){
			if(type){
				reBackType('index');
				$api.removeCls($api.byId('qingjia'),'active');
				$api.addCls($api.byId('gongchu'),'active');
				rule_type = 1;
				commonExecScript('kaoqin_add_window','kaoqin_add_frame','changeType(1);',1);
			}else{
				commonExecScript('kaoqin_add_window','kaoqin_add_frame','verExitContent();',1);
			}
		}
		/*
		*author:zhaoj
		*function:打开frame页面
		*date：20160620
		*/
		function openFrame(name,type){
			reBackType('index');
			var header_h = api.pageParam.header_h;
			var pageParamJson={"header_h":header_h,type : type};//打开frame页面所需参数
			commonOpenFrame(name, name+'.html',header_h+45, false, false,"#ffffff",pageParamJson);	//打开index页面
		}
		/*
		*author:zhaoj
		*function:返回页面
		*date：20160307
		*/
		function back() {
			switch(back_type) {
				case 'index':
					api.closeWin();
					break;
				case 'style':
					api.closeFrame({
						name : 'kaoqin_add_seltype_frame'
					});
					reBackType('index');
					break;
			}
		}
		/*
		*author:zhaoj
		*function:返回页面
		*date：20160621
		*/
		function resetName(name){
			$api.text($api.byId('mTitle'), name);
		}
		/**
		 * 重置从哪个页面退出
		 * 周枫
		 * 2015.12.17
		 */
		function reBackType(type) {
			switch(type) {
				//如果通知列表页面退出
				case 'index':
					resetName('申请');
					back_type = 'index';
					break;
				//如果微课内容页面退出
				case 'style':
					if(rule_type){
						resetName('公出类型');
					}else{
						resetName('请假类型');
					}
					back_type = 'style';
					break;
			}
		}
	</script>
</html>