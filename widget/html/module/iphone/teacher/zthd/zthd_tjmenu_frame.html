<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
        <title>相册下拉菜单</title>
        <link rel="stylesheet" type="text/css" href="../../../../../css/aui/aui.css"/>
        <link id="j_theme_base" rel="stylesheet" type="text/css" href="" />
        <style>
        html, body {
            background-color: rgba(0,0,0,0) !important;
         }
        body{padding:0;margin:0;}
        .shadow{position:absolute;left:0;top:0;width:100%;height:100%;z-index: 1;}
        .header{width:100%;height:45px;}
        .main{width:100%;}
        .menu-list{
            list-style:none;
            background-color: #ffffff;
            box-shadow: 0px 0px 5px #cccccc;
            position: relative;
            width: 115px;
            float: right;
            z-index: 2;
            padding: 0;
            margin:0;
        }
        .menu-list li {
            height: 48px;
            line-height:48px;
            display: block;
            border-bottom: 1px solid #eeeeee;
            color: #333;
            font-family: sans-serif;
            text-align:center;
        }
        .menu-list li .name{
        	display:block;width:75px;
        	height:48px;
        	padding-left: 5px;
        	line-height:48px;
        	float:left;text-align:center;
        }
        .ellipsis{white-space: nowrap;overflow: hidden;text-overflow: ellipsis;}
        .asc{
          float:right;
          background:url(../../../../../image/fun-module/ipad/zthd/asc.png) left center no-repeat;
          background-size:10px 20px;
          width:15px;
          height:100%;
          margin-right:5px;
        }
        .desc{
          float:right;
          background:url(../../../../../image/fun-module/ipad/zthd/desc.png) right center no-repeat;
          background-size:10px 20px;
          width:15px;
          height:100%;
          margin-right:5px;
        }
        .asc-active{
          float:right;
          background:url(../../../../../image/fun-module/ipad/zthd/asc-active.png) left center no-repeat;
          background-size:10px 20px;
          width:15px;
          height:100%;
          margin-right:5px;
        }
        .desc-active{
          float:right;
          background:url(../../../../../image/fun-module/ipad/zthd/desc-active.png) right center no-repeat;
          background-size:10px 20px;
          width:15px;
          height:100%;
          margin-right:5px;
        }
    </style>
    </head>
    <body class="common-iphone-zthd-tea">
        <div class="shadow" tapmode onclick="api.closeFrame({name:'zthd_tjmenu_frame'});"></div>
        <div id="header" class="header"></div>
        <div id="main" class="main aui-hide">
            <ul id="ul" class="menu-list">  
                <li id="type_1" onclick="changePx(1,'desc');">
                    <div id="name_1" class="name ellipsis" style="float:left">活动数量</div>
                    <div id="asc_1" class="asc">&nbsp;</div>
                    <div id="desc_1" class="desc">&nbsp;</div>
                </li>
                <li id="type_3" onclick="changePx(3,'desc');">
                    <div id="name_3" class="name ellipsis" style="float:left">参与人次</div>
                    <div id="asc_3" class="asc">&nbsp;</div>
                    <div id="desc_3" class="desc">&nbsp;</div>
                </li>
                <li id="type_2" onclick="changePx(2,'desc');">
                    <div id="name_2" class="name ellipsis" style="float:left">作品数量</div>
                    <div id="asc_2" class="asc">&nbsp;</div>
                    <div id="desc_2" class="desc">&nbsp;</div>
                </li>
            </ul>
        </div>
    </body>
    <script type="text/javascript" src="../../../../../script/api.js"></script>
    <script type="text/javascript" src="../../../../../script/base_config.js" ></script>
    <script type="text/javascript" src="../../../../../script/common/common.js"></script>
    <script type="text/javascript">
        var now_type = 'desc';
        var now_column = 0;
        apiready = function () {
            commonSetTheme({"level":5,"type":0});
            now_type = api.pageParam.sort_type;
            now_column = api.pageParam.sort_column;
            $api.attr($api.byId('type_'+now_column), 'onclick', 'changePx('+now_column+',"'+now_type+'")');
            
            $api.removeCls($api.byId(now_type+'_'+now_column), now_type);
            $api.addCls($api.byId(now_type+'_'+now_column), now_type+'-active');
            $api.css($api.byId('name_'+now_column), 'color:#34a8f6');
            /*
             * 调整menu高度
             * header是隐藏的，代表工具栏到手机屏幕最上方的距离
             * main代表工具栏下方到手机屏幕最下方的距离
             * 有些手机的header_h会将上方的电池那一栏的高度也算进去，所以要特殊设置menu
             */
            header_h = api.pageParam.header_h;
            dic_type = api.pageParam.dic_type;
            $api.removeCls($api.dom($api.byId('main'), '.active'), 'active');
            $api.addCls($api.byId('type_'+dic_type), 'active');
            $api.css($api.byId('header'), 'height:' + header_h + 'px;');
            $api.css($api.byId('main'), 'height:' + (api.winHeight - header_h) + 'px;');
            commonAddOrRemoveHideCss('main',1);
        }
        /*
         * 功能：改变主题活动排序分类
         * 作者：张自强
         * 时间：20171023
         */
        function changePx(sortColumn,sortType){
            if(sortColumn == now_column){
              if(sortType == 'desc'){
                  sortType = 'asc';
              }else{
                  sortType = 'desc';
              }
            }
            if(api.pageParam.fromType == 1){
                commonExecScript('zthd_tj_window','','changeSortType('+sortColumn+',"'+sortType+'");',0);
            }else if(api.pageParam.fromType == 2){
                commonExecScript('zthd_index_window','zthd_tjtea_frame','changeSortType('+sortColumn+',"'+sortType+'");',1);
            }
            commonCloseFrame('zthd_tjmenu_frame');
        }
    </script>
</html>