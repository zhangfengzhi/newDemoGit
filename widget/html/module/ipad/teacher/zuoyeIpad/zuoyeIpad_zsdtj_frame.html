<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>试题统计</title>
    <link rel="stylesheet" type="text/css" href="../../../../../css/aui/aui.css"/>
    <link id="j_theme_base" rel="stylesheet" type="text/css" href="" /><style>
    	body{background:#f6f6f6;color:#333;}
    	.title{padding:20px 0 5px 10px;font-size:14px;border-bottom:1px solid #efefef;border-top:1px solid #efefef;color:#484848;}
    	.content li{list-style:none;border-bottom:1px solid #efefef;padding:10px 15px 0 15px;background:#ffffff;margin-bottom:10px;}
    	.top{padding-bottom:10px;border-bottom:1px dashed #efefef;}
    	.head-img{width:58px;height:50px;float:left;background:url(../../../../../image/fun-module/iphone/zuoye/zsd.png) left top no-repeat;background-size:50px 50px;}
    	.person-name{line-height:28px;}
    	.rate{font-size:13px;color:#9F9F9F;width:85px;float:left;padding-top:2px;}
    	.rate font{color:#ff0000;}
    	.st-name{padding:10px 0 15px 0;}
    	.st-num{width:100%;}
    	.st-num li{list-style:none;float:left;width:25%;padding:0 0 15px 0;text-align:center;border-bottom:none;margin-bottom:0;}
    	.st-num li span{display:inline-block;width:40px;height:40px;border-radius:20px;text-align:center;line-height:40px;}
    </style>
</head>
<body class="common-ipad-zuoyeIpad-tea">
	<div class="title">按知识点分析</div>
	<ul id="div_body" class="content"></ul>
	<script type="text/html" id="div_script">
		<%if(list.length==0){%>
			<div class="no-data">暂无知识点信息</div>
		<%}else{%>
			<%for(var i = 0 ;i < list.length; i++){%>
			<li>
				<div class="top clearfix">
					<div class="head-img">
					</div>
					<div class="person-name ellipsis"><%=list[i].structure_name%></div>
					<%if(list[i].wrong_rate>0){%>
						<div class="rate">错误率：<font><%=list[i].wrong_rate%>%</font></div>
					<%}else{%>
						<div class="rate">错误率：<font><%=list[i].wrong_rate%></font></div>
					<%}%>
				</div>
				<div class="bottom">
					<div class="st-name">题号</div>
					<ul class="st-num clearfix">
					<%for(var j = 0 ;j < list[i].q_que_list.length; j++){%>
						<li onclick="showQueDetail('<%=list[i].q_que_list[j].question_id_char%>',<%=list[i].q_que_list[j].sort%>,'<%=list[i].q_que_list[j].qt_name%>',<%=list[i].q_que_list[j].qt_type%>,0,'','','','','','','')">
							<span><%=list[i].q_que_list[j].sort%></span>
						</li>
					<%}%>
					</ul>
				</div>
			</li>
			<%}%>
		<%}%>
		</script>
</body>
<script type="text/javascript" src="../../../../../script/api.js"></script>
<script type="text/javascript" src="../../../../../script/base_config.js" ></script>
<script type="text/javascript" src="../../../../../script/plug-in/template.js" ></script>
<script type="text/javascript" src="../../../../../script/common/common.js" ></script>
<script type="text/javascript" src="../../../../../script/common/jszy_jy_common.js" ></script>
<script type="text/javascript">
	var n_id = 0;//定义滑动条id
	var bar_ids =[];//滑动条项目对应的id
	var BASE_URL_ACTION;
	var bar_type=[];
	var zy_id;//检测id
	var obj_id;//--班级/群组ID
	var obj_type = -1;//-1 代表全部，1班级2群组
	apiready = function(){
		commonSetTheme({"level":5,"type":0});
		header_h = api.pageParam.header_h;
		BASE_URL_ACTION = $api.getStorage('BASE_URL_ACTION');
		zy_id = api.pageParam.zy_id;
	};
	/*
	*作者:zhaoj
	*功能:隐藏数据
	*日期：20160927
	*/
	function hiddenData(){
		$api.css($api.byId('div_body'),'display:none');
	}
	/*
	*作者:zhaoj
	*功能:滑动条点击回调函数
	*日期：20160912
	*/
	function callBackNew(id, index) {
		var bar_index = index;
		obj_id = bar_ids[bar_index];
		obj_type =bar_type[bar_index];
		getZyTongJiByKnowledges(bar_index);
	}
	/*
	*作者:zhaoj
	*功能:获取知识点数据
	*日期：20160922
	*/
	function getZyTongJiByKnowledges(is_show){
		is_show !=0 ? showSelfProgress('加载中...'):'';
		api.ajax({
			url : BASE_URL_ACTION +'/xx/getZyTongJiByKnowledges?zy_id='+zy_id+'&obj_type='+obj_type+'&obj_id='+obj_id+'&random='+creatRandomNum(),
			method : 'get',
			timeout : 30,
			dataType : 'json',
			cache : false,
		}, function(ret, err) {
			api.hideProgress();
			if (err) {
				popToast('获取知识点信息失败');
			} else {
				if(ret){
					var html_type = template.render('div_script', ret);
					document.getElementById('div_body').innerHTML = html_type;
					$api.css($api.byId('div_body'),'display:block');
				}else{
					popToast('获取知识点信息失败');
				}
			}
		});
	}
</script>
</html>