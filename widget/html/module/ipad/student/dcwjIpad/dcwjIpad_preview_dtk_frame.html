<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>检测</title>
    <link rel="stylesheet" type="text/css" href="../../../../../css/aui/aui.css" />
    <link id="j_theme_base" rel="stylesheet" type="text/css" href="" />
    <style>
    	body{margin:0;padding-bottom:60px;}
    	.clearfix:after{content: ' ';display: block;clear: both;visibility: hidden;line-height: 0;height: 0;}
    	.zuoye-name{line-height:55px;width:100%;}
    	.plr15{padding:0 15px;}
    	.title{height:55px;line-height:55px;color:#606060;}
    	.question-item ul li{float:left;}
    	.question-item ul li div{margin:0 auto;text-align:center;}
    	.question-item ul li div.active{color:#ffffff;background-clip:padding-box;}
    	.footer-div{position:fixed;height:55px;background:#F6F6F6;display: block;bottom: 0px;width:100%;border-top:1px solid #E2E2E2;font-size:14px;}
		.footer-div .wid50{width:45%;line-height:36px;text-align:center;color:#ffffff;margin-top:9px;border-radius:2px}
		.footer-div .left{float:left;margin-left:4%;}
		.footer-div .right{float:right;margin-right:4%;}
		.footer-div .wid{width:92%;line-height:36px;text-align:center;color:#ffffff;\margin-top:9px;border-radius:2px;margin-left:4%;}
		.content-div{padding-top:20px;}
    </style>
</head>
<body class="common-ipad-dcwjIpads">
	<div class="content-div clearfix">
		<!--客观题-->
		<div class="question-item plr15">
			<ul id="objective">
			</ul>
		</div>
		<!--//客观题-->
	</div>
</body>
<script type="text/javascript" src="../../../../../script/api.js"></script>
<script type="text/javascript" src="../../../../../script/base_config.js" ></script>
<script type="text/javascript" src="../../../../../script/plug-in/base64.js" ></script>
<script type="text/javascript" src="../../../../../script/common/common.js" ></script>
<script type="text/javascript">
	var header_h;
	var BASE_URL_ACTION;
	var answer_json;//作答的json数据
	var list_length;
	apiready = function(){	
		commonSetTheme({"level":5,"type":0});
		header_h = api.pageParam.header_h;
		answer_json = Base64.decode(api.pageParam.answer_json);
		answer_json = JSON.parse(answer_json)
		setDtkData();
		BASE_URL_ACTION = $api.getStorage('BASE_URL_ACTION');
	};
	/*
	*作者:zhaoj
	*功能:设置答题卡
	*日期：20161102
	*/
	function setDtkData(){
		for(var i = 0; i < answer_json.items.length; i++){
			if((i+1) == api.pageParam.sort){
				objective(i+1,1);
			}else{
				objective(i+1,0);
			}
		}
	}
	/*
	*author:zhaoj
	*function:客观题选项
	*date：20160329
	*/
	function objective(sort,is_answered){
		if(is_answered){
			uploadHtml('objective',sort,'active');
		}else{
			uploadHtml('objective',sort,'');
		}
	}
	/*
	*author:zhaoj
	*function:客观题和客观题选项添加到页面中
	*date：20160329
	*/
	function uploadHtml(divID,sort,css){
		var liWidth = Math.floor((api.frameWidth-30)/5);
		var liHeight = liWidth+5;
		var divWidth= Math.floor(liWidth*0.8);
		var divHeight = divWidth;
		var borderRad = Math.floor(divWidth*0.5);
		var checkHtml='checkQuestion(this,'+sort+')';
		var liHtml = '<li style="width:'+liWidth+'px;height:'+liHeight+'px;" onclick='+checkHtml+'>';
			if(api.frameWidth>360){
				liHtml = liHtml+'<div class="'+css+'" style="max-width:48px;max-height:48px;line-height:47px;border-radius:24px !important;">'+sort+'</div>';
			}else{
				liHtml = liHtml+'<div class="'+css+'" style="width:'+divWidth+'px;height:'+divHeight+'px;border-radius:'+borderRad+'px !important;line-height:'+(divHeight-3)+'px;max-width:48px;max-height:48px;">'+sort+'</div>';
			}
			liHtml = liHtml+'</li>';
		$api.append($api.byId(divID), liHtml);
	}
	/*
	*作者:zhaoj
	*功能:点击查看具体某一道题目
	*日期：20161102
	*/
	function checkQuestion(self,sort){
		var li_array = $api.domAll($api.byId('objective'), 'li');
		for(var i = 0; i < li_array.length; i++){
			var div_dom = $api.dom(li_array[i], 'div');
			$api.removeCls(div_dom,'active');
		}
		$api.addCls($api.dom(self, 'div'),'active');
		sort=sort-1;
		var name = "reWriteQuestion("+sort+")";
		if(api.pageParam.type == 1){
			api.execScript({
				name : 'dcwjIpad_preview_window',
				frameName : 'dcwjIpad_preview_frame',
				script : name
			});
			setTimeout(function(){
				api.execScript({
					name : 'dcwjIpad_preview_window',
					script : 'openYlDtk(2)'
				});
			},150);
		}else{
			api.execScript({
				name : 'dcwjIpad_chart_window',
				frameName : 'dcwjIpad_chart_frame',
				script : name
			});
			setTimeout(function(){
				api.execScript({
					name : 'dcwjIpad_chart_window',
					script : 'openYlDtk(2)'
				});
			},150);
		}
	}
</script>
</html>