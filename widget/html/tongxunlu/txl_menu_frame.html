<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<title>通讯录下拉菜单</title>
		<link id="j_theme_base" rel="stylesheet" type="text/css" href="" />
		<style>
			html, body {
				background-color: transparent;
			}
			body {
				padding: 0;
				margin: 0;
			}
			.shadow {
				position: absolute;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
				z-index: 1;
			}
			.header {
				width: 100%;
				height: 45px;
				display:none;
			}
			.main {
				width: 100%;
			}
			.menu-list {
				list-style: none;
				background-color: #ffffff;
				box-shadow: 0px 0px 5px #cccccc;
				position: relative;
				width: 166px;
				float: right;
				z-index: 2;
				padding: 0;
				margin: 0;
			}
			.menu-list li {
				height: 48px;
				line-height: 48px;
				display: block;
				border-bottom: 1px solid #eeeeee;
				color: #333;
				font-family: sans-serif;
			}
			.menu-list li .icon-box {
				width: 60px;
				height: 48px;
				display: inline-block;
				float: left;
			}
			.menu-list li span {
				display: inline-block;
				height: 48px;
				line-height: 48px;
				float: left;
			}
			.menu-list li .friend {
				background: url(../../image/person/add_person_new.png) 15px center no-repeat;
				background-size: 24px 24px;
			}
			.menu-list li .group {
				background: url(../../image/person/add_group.png) 15px center no-repeat;
				background-size: 24px 24px;
			}
		</style>
	</head>
	<body class="tongxunlu-common">
		<div class="shadow" tapmode onclick="api.closeFrame({name:'txl_menu_frame'});"></div>
		<div id="header" class="header">
			<div id="main" class="main">
				<ul class="menu-list">
					<li onclick="openAddWindow('txl_addfriends_window');">
						<div class="icon-box friend"></div>
						<span>添加好友</span>
					</li>
					<li onclick="creatGroup()">
						<div class="icon-box group"></div>
						<span>创建群组</span>
					</li>
				</ul>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../../script/api.js"></script>
	<script type="text/javascript" src="../../script/base_config.js"></script>
	<script type="text/javascript" src="../../script/common/common.js" ></script>
	<script type="text/javascript">
		var header_h;
		apiready = function() {
			commonSetTheme({"level":2,"type":0});
			header_h = api.pageParam.header_h;
			$api.css($api.byId('header'), 'margin-top:' + header_h + 'px;');
			$api.css($api.byId('header'), 'display:' + 'block;');
			$api.css($api.byId('header'), 'height:' + header_h + 'px;');
			$api.css($api.byId('main'), 'height:' + (api.winHeight - header_h) + 'px;');
		};
		/**
		 * 打开增加好友页面
		 * 周枫
		 * 2016.1.19
		 */
		function openAddWindow(win_name) {
			isOnLineStatus(function(is_online, line_type) {
				if (is_online) {
					$api.setStorage('friend_is_change', 0);
					api.openWin({
						name : win_name,
						url : win_name + '.html',
						bounces : false,
						delay : 0,
						scrollToTop : true,
						allowEdit : true,
						slidBackEnabled : false,
						scaleEnabled : false,
						animation : {
							type : "reveal", //动画类型（详见动画类型常量）
							subType : "from_right", //动画子类型（详见动画子类型常量）
							duration : 300
						},
						pageParam : {
							'header_h' : header_h
						}
					});
				} else {
					api.toast({
						msg : '请连接网络后使用当前功能~'
					});
				}
				setTimeout(function(){
					commonCloseFrame('txl_menu_frame');				
				},300);

			});
		}
		/*
		 *author:ws
		 *function:添加分组
		 *date：20170112
		 */
		function creatGroup() {
			var pageParamJson = {
				"header_h" : header_h,
				"type":1
			};
			commonOpenFrame("txl_addgroup_frame", "txl_addgroup_frame.html", header_h, false, false, "rgba(0,0,0,0)", pageParamJson);
			commonCloseFrame('txl_menu_frame');
		}
	</script>
</html>